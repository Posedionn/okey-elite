<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>101 Okey Elite Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --plus-bg: #073307;
            --plus-border: #ffd700;
            --tile-bg: #fdfaf1;
        }
        body { 
            background: radial-gradient(circle, #0a4d0a 0%, #041a04 100%); 
            color: white; font-family: 'Helvetica', sans-serif; 
            margin: 0; overflow: hidden; touch-action: none;
        }

        /* √úst Panel & Saya√ß */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 15px; background: rgba(0,0,0,0.8);
            border-bottom: 2px solid var(--plus-border);
        }
        .timer-circle {
            width: 40px; height: 40px; border: 3px solid #ffeb3b;
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; font-weight: bold; font-size: 18px;
        }

        /* Oyun Masasƒ± Yerle≈üimi */
        .table {
            height: 45vh; position: relative;
            background: url('https://www.transparenttextures.com/patterns/dark-leather.png');
        }

        /* Plus Tarzƒ± Oyuncu Kutularƒ± */
        .player {
            position: absolute; width: 55px; height: 75px;
            background: rgba(0,0,0,0.7); border: 1.5px solid #888;
            border-radius: 10px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; font-size: 10px;
        }
        .p-top { top: 10px; left: 50%; transform: translateX(-50%); border-color: #ffeb3b; }
        .p-left { top: 40%; left: 10px; transform: translateY(-50%); }
        .p-right { top: 40%; right: 10px; transform: translateY(-50%); }
        .avatar { width: 35px; height: 35px; background: #444; border-radius: 50%; margin-bottom: 5px; }

        /* Ortadaki Ta≈ülar */
        .deck-center {
            position: absolute; top: 45%; left: 50%;
            transform: translate(-50%, -50%); display: flex; gap: 20px;
        }

        /* 3D Ta≈ü Tasarƒ±mƒ± */
        .tile {
            width: 32px; height: 46px; background: var(--tile-bg);
            border-radius: 4px; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            font-weight: bold; font-size: 17px; color: #333;
            box-shadow: 0 4px 0 #bcbab0, 2px 5px 10px rgba(0,0,0,0.6);
            cursor: grab;
        }
        .tile.red { color: #d32f2f; } .tile.blue { color: #1976d2; }
        .tile.black { color: #000; } .tile.orange { color: #f57c00; }
        .tile::after { content: '‚óè'; font-size: 8px; margin-top: -5px; opacity: 0.3; }

        /* Istaka Alanƒ± (√áift Sƒ±ra) */
        .rack-zone {
            position: fixed; bottom: 65px; width: 100%;
            background: linear-gradient(to bottom, #422d21, #261710);
            padding: 12px 0; border-top: 5px solid #1a100a;
        }
        .row { display: flex; justify-content: center; gap: 4px; height: 50px; margin-bottom: 4px; min-height: 50px; }

        /* Kontrol Paneli */
        .footer {
            position: fixed; bottom: 0; width: 100%; height: 65px;
            display: grid; grid-template-columns: repeat(5, 1fr);
            background: #000; padding: 5px; gap: 3px;
        }
        .btn {
            border: none; border-radius: 6px; font-weight: bold;
            font-size: 9px; color: #ffd700; background: #222;
            text-transform: uppercase;
        }
        .btn-active { background: linear-gradient(#4caf50, #1b5e20); color: white; }
    </style>
</head>
<body>

    <div class="header">
        <div class="timer-circle" id="timer">45</div>
        <div style="text-align: right;">
            <span style="font-size: 10px; color: #aaa;">TOPLAM PUAN</span><br>
            <span id="score" style="font-size: 20px; font-weight: bold; color: #4caf50;">0</span>
        </div>
    </div>

    <div class="table" id="drop-area">
        <div class="player p-top"><div class="avatar"></div>Bot 1</div>
        <div class="player p-left"><div class="avatar"></div>Bot 2</div>
        <div class="player p-right"><div class="avatar"></div>Bot 3</div>

        <div class="deck-center">
            <div class="tile" style="background:#222; color:white; border:1px solid #444;" onclick="tasCek()">üé¥</div>
            <div class="tile"><span style="font-size:7px; color:#999;">OKEY</span>11</div>
        </div>
    </div>

    <div class="rack-zone">
        <div class="row" id="r1"></div>
        <div class="row" id="r2"></div>
    </div>

    <div class="footer">
        <button class="btn btn-active" onclick="dagit()">DAƒûIT</button>
        <button class="btn" onclick="alert('Seri kontrol ediliyor...')">SERƒ∞ A√á</button>
        <button class="btn" onclick="alert('√áift kontrol ediliyor...')">√áƒ∞FT A√á</button>
        <button class="btn" onclick="autoSort()">Dƒ∞Z</button>
        <button class="btn" style="color:#f44336" onclick="location.reload()">YENƒ∞</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();
        
        const colors = ['red', 'blue', 'black', 'orange'];
        
        function dagit() {
            const r1 = document.getElementById('r1'); const r2 = document.getElementById('r2');
            r1.innerHTML = ''; r2.innerHTML = '';
            for(let i=0; i<22; i++) {
                const n = Math.floor(Math.random()*13)+1;
                const c = colors[Math.floor(Math.random()*4)];
                const t = `<div class="tile ${c}" data-val="${n}">${n}</div>`;
                if(i<11) r1.innerHTML += t; else r2.innerHTML += t;
            }
            tg.HapticFeedback.impactOccurred('heavy');
        }

        [document.getElementById('r1'), document.getElementById('r2'), document.getElementById('drop-area')].forEach(el => {
            new Sortable(el, { group: 'plus', animation: 150, ghostClass: 'tile-ghost' });
        });

        let timeLeft = 45;
        setInterval(() => {
            if(timeLeft > 0) {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if(timeLeft <= 10) document.getElementById('timer').style.color = 'red';
            }
        }, 1000);

        window.onload = dagit;
    </script>
</body>
</html>